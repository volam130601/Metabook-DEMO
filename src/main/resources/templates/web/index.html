<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Metabook</title>

    <th:block th:replace="fragments/common :: head-source"></th:block>
</head>

<body class="bg-content">
<nav class="navbar navbar-expand-sm navbar-white bg-white shadow-sm fixed-top">
    <a class="" href="#">
        <img alt="" class="w-40px h-40px img-cover rounded-circle" th:src="@{/web/image/metabook.png}"/></a>
    <div class="navbar-search mr-auto">
        <i aria-hidden="true" class="fa fa-search search-icon"></i>
        <input class="search-input" onfocus="showBoxSearch()" placeholder="Search in Metabook"
               type="text"/>
    </div>
    <div class="bg-white shadow-around fixed-top pl-3 pr-3 pb-2 pt-2 rounded-bottom d-none" id="box-search"
         style="width: 350px;">
        <div class="box-search-header d-flex justify-content-center align-items-center">
            <button class="search-backhome border-0 btn-focus bg-transparent"
                    onclick="hideBoxSearch()"><i
                    class="fa-solid fa-arrow-left"></i></button>
            <div class="navbar-search flex-fill">
                <input class="search-input p-2" id="search-user-input" onkeyup="searchUser('#search-user-input')"
                       placeholder="Search in Metabook"
                       type="text"/>
            </div>
        </div>
        <span class="fs-4 text-danger d-flex justify-content-center mt-3 mb-3"
              id="span-search-null">Cannot found user</span>
        <div id="box-show-user-search"></div>

    </div>
    <div class="navbar-list mr-auto text-secondary">
        <a class="navbar-page active m-2" data-placement="bottom" data-toggle="tooltip" title="Home">
            <i class="fa-solid fa-house"></i>
        </a>
        <a class="navbar-page m-2" data-placement="bottom" data-toggle="tooltip" title="Friends">
            <i class="fa-solid fa-user-friends"></i>
        </a>
        <a class="navbar-page m-2" data-placement="bottom" data-toggle="tooltip" title="Watch">
            <i class="fa-brands fa-youtube"></i>
        </a>
    </div>
    <div class="ml-auto">
        <div class="d-flex justify-content-center align-items-center">
            <a class="navbar-rigth-item">
                <i class="fa-brands fa-facebook-messenger"></i>
            </a>
            <a class="navbar-rigth-item">
                <i aria-hidden="true" class="fa fa-bell"></i>
                <div class="bell-report">10+</div>
            </a>
            <div class="dropdown">
                <img alt="" aria-expanded="false"
                     aria-haspopup="true"
                     class="dropdown-toggle w-40px h-40px img-cover rounded-circle" data-toggle="dropdown"
                     id="dropdownMenuButton" th:src="@{${user.getAvatarPath()}}">
                <div aria-labelledby="dropdownMenuButton" class="dropdown-menu dropdown-menu-right mt-2 shadow-sm">
                    <a class="dropdown-item" data-target="#userProfileModal" data-toggle="modal" href="#!"
                       id="btn-my-account">
                        <i aria-hidden="true" class="fa fa-user mr-1 bg-grey p-2 rounded-circle"></i>
                        My account
                    </a>
                    <a class="dropdown-item" data-target="#changePasswordModal" data-toggle="modal" href="#!">
                        <i class="fa-solid fa-gear mr-1 bg-grey p-2 rounded-circle"></i>
                        Change password
                    </a>
                    <a class="dropdown-item " th:href="@{/logout}">
                        <i class="fa-solid fa-right-from-bracket mr-1 bg-grey p-2 rounded-circle"></i>
                        Log out
                    </a>
                </div>
            </div>
        </div>
    </div>
</nav>

<div class="container-fluid bg-light">
    <div class="row">
        <div class="col">
            <div class="fixed-left">
                <div class="sidebar mt-3 sidebar-scrollbar">
                    <div class="sidebar-item">
                        <img alt=""
                             class="sidebar-item__img w-40px h-40px img-cover rounded-circle"
                             th:src="@{${user.getAvatarPath()}}">
                        <a class="sidebar-item__link ml-2" href="" th:utext="${user.fullName}"></a>
                    </div>
                    <div class="sidebar-item">
                        <img alt=""
                             class="sidebar-item__img" th:src="@{/web/image/friends.png}">
                        <a class="sidebar-item__link ml-2" href="">Friends</a>
                    </div>
                    <div class="sidebar-item">
                        <img alt=""
                             class="sidebar-item__img" th:src="@{/web/image/group.png}">
                        <a class="sidebar-item__link ml-2" href="">Group</a>
                    </div>
                    <div class="sidebar-item">
                        <img alt=""
                             class="sidebar-item__img" th:src="@{/web/image/watch.png}">
                        <a class="sidebar-item__link ml-2" href="">Watch</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6 mt-3 mb-5">
            <div class="card content ">
                <div class="card-header bg-white">
                    <div class="navbar-list mr-auto text-secondary">
                        <a class="navbar-page navbar-story active mr-2">
                            <i class="fa-solid fa-book-open mr-1"></i>
                            <span class="fs-4 font-weight-bold text-meta">News</span>
                        </a>
                        <a class="navbar-page navbar-story">
                            <i class="fa-solid fa-video mr-1"></i>
                            <span class="fs-4 font-weight-bold">Meet Room</span>
                        </a>
                    </div>
                </div>
                <div class="card-body d-flex ">
                    <div class="slideshow" id="box-slide-story">
                        <!--    Slide here-->
                    </div>
                </div>
            </div>
            <div class="card content mt-3">
                <div class="create-post">
                    <div class="d-flex mt-3 ml-3">
                        <img alt="" class="h-40px w-40px img-cover rounded-circle"
                             th:src="@{${user.avatarPath}}">
                        <input class="ml-3 mr-3 create-post__input btn-focus" data-target="#postCreateModal"
                               data-toggle="modal" placeholder="What do you think?" readonly="readonly" type="text">
                    </div>
                    <hr>
                    <div class="d-flex justify-content-around align-items-center mb-2">
                        <div class="d-flex align-items-center create-post__btn">
                            <img alt=""
                                 th:src="@{/web/image/post/video_icon.png}" width="30">
                            <span class="ml-1 font-weight-bold fs-3">Video trực tiếp</span>
                        </div>
                        <div class="d-flex align-items-center create-post__btn">
                            <img alt=""
                                 th:src="@{/web/image/post/picture_icon.png}" width="30">
                            <span class="ml-1 font-weight-bold fs-3">Ảnh/video</span>
                        </div>
                        <div class="d-flex align-items-center create-post__btn">
                            <img alt=""
                                 th:src="@{/web/image/post/face_smile_icon.png}" width="30">
                            <span class="ml-1 font-weight-bold fs-3">Feeling/activity</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Post Image -->
            <div id="post-image-body">
                <!--  Post Body here    -->
            </div>
        </div>

        <div class="col">
            <div class="fixed-right">
                <div class="sidebar sidebar-right mt-3 sidebar-scrollbar">
                    <div class="d-flex ml-2">
                        <h6 class="mr-auto text-muted">Friend Request</h6>
                        <button class="fs-3 font-weight-bold btn-focus bg-transparent border-0 text-underline text-meta"
                                data-target="#requestFriendModal" data-toggle="modal"
                                onclick="showAcceptFriendList()">Show all
                        </button>
                    </div>
                    <div class="sidebar-invitation" id="box-accept-friend">

                    </div>
                    <hr>
                    <div class="d-flex ml-2">
                        <h6 class="mr-auto text-muted">Contact person</h6>
                        <div class="d-flex justify-content-around">
                            <a class="pr-3 text-muted" href=""><i class="fa-solid fa-video"></i></a>
                            <a class="pr-3 text-muted" href=""><i class="fa-solid fa-magnifying-glass"></i></a>
                            <a class="pr-3 text-muted" href=""> <i class="fa-solid fa-ellipsis"></i></a>
                        </div>
                    </div>
                    <div id="box-show-friend"></div>
                </div>
            </div>
        </div>
    </div>
</div>


<!--  Post Create Modal  -->
<div aria-hidden="true" aria-labelledby="postCreateModalLabel" class="modal fade" id="postCreateModal"
     style="background-color: rgb(255 255 255 / 60%);" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="font-weight-bold" id="postCreateModalLabel">Post Create</h5>
                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="d-flex align-content-center">
                    <img alt="" class="hw-50px rounded-circle img-cover" th:src="@{${user.avatarPath}}">
                    <div class="d-flex flex-column ml-2">
                        <div class="fs-4 font-weight-bold" th:utext="${user.fullName}"></div>
                        <button class="bg-grey-1 border-0 rounded fs-3 font-weight-bold text-muted">
                            <!-- <i class="fa-solid fa-lock fs-3 mr-1"></i>-->
                            <i class="fa-solid fa-earth-americas"></i>
                            <span>Global</span>
                            <i class="fa-solid fa-sort-down ml-1"></i>
                        </button>
                    </div>
                </div>
                <div class="post-create-body mt-3" id="post-create-body">
                    <div class="post-create__input">
                        <textarea class="w-100 border-0 btn-focus pr-5" id="post-create__input" name="post-text"
                                  placeholder="Hi sir, what are you thinking?" rows="4"
                                  style="resize: none;"></textarea>
                        <i class="fa-regular fa-face-smile fs-5 text-muted p-2 m-1"></i>
                    </div>
                    <div class="position-relative border-grey-1 rounded">
                        <div class="post-create__image m-2 border-grey-1 bg-grey-1 rounded">
                            <div class="d-flex flex-column justify-content-center align-items-center"
                                 style="height: 200px;">
                                <i class="fa-solid fa-image bg-grey p-3 rounded-circle"></i>
                                <span class="fs-4 font-weight-bold">Add image</span>
                            </div>
                            <label class="post-label bg-transparent m-0 rounded" for="upload-image-post"></label>
                        </div>
                        <div class="h-100">
                            <div class="post-image m-2 rounded" id="post-image"></div>
                        </div>
                        <input hidden id="upload-image-post" type="file">

                        <button class="d-none post-close position-absolute bg-white pl-2 pr-2 fs-5 font-weight-bold rounded-circle border-0"
                                onclick="clearImage()"
                                style="top: 15px; right: 15px;">&times;
                        </button>
                        <div class="d-none post-control-top position-absolute bg-light p-1 pl-2 pr-2 rounded"
                             style="top: 15px; left:20px;">
                            <i class="fa-solid fa-image"></i>
                            <span class="fs-3 font-weight-bold">Add image</span>
                            <label class="post-label bg-transparent m-0" for="upload-image-post"></label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary w-100" onclick="postContent()" type="button">Post</button>
            </div>
        </div>
    </div>
</div>

<!--  Add friend Modal  -->
<div aria-hidden="true" aria-labelledby="addFriendModalLabel" class="modal fade" id="addFriendModal"
     style="background-color: rgb(255 255 255 / 60%); " tabindex="-1">
    <div class="modal-dialog" style="width: 400px; margin-top: 10px; margin-bottom: 10px;">
        <div class="modal-content" id="box-friend"></div>
    </div>
</div>


<!--  List Request friend Modal  -->
<div aria-hidden="true" aria-labelledby="requestFriendModalLabel" class="modal fade" id="requestFriendModal"
     style="background-color: rgb(255 255 255 / 60%); " tabindex="-1">
    <div class="modal-dialog" style="width: 400px; margin-top: 10px; margin-bottom: 10px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="font-weight-bold">Request Friend List</h5>
                <button aria-label="Close" class="close btn-focus" data-dismiss="modal" type="button">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-0">
                <div id="request-list">
                </div>
            </div>
        </div>
    </div>
</div>
<th:block th:replace="fragments/common :: modal-user"></th:block>

<th:block th:replace="fragments/common :: js-source"></th:block>
<!--JS Custom-->
<script src="../../static/web/assets/js/slider.js" th:src="@{/web/assets/js/slider.js}"></script>
<script src="../../static/web/assets/js/post.js" th:src="@{/web/assets/js/post.js}"></script>
<script src="../../static/web/assets/js/friend.js" th:src="@{/web/assets/js/friend.js}"></script>
</body>

</html>